<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <header class="header">
        <h1>‚≠ê –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞–º–∏</h1>
    </header>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
    <div th:if="${error}" class="error-message">
        <strong>–û—à–∏–±–∫–∞:</strong> <span th:text="${error}"></span>
    </div>

    <div class="form-section">
        <h2 th:text="${review.id != null} ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤' : '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤'">
            –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤
        </h2>

        <form th:action="${review.id != null} ?
                          @{/reviews/update/{id}(id=${review.id})} :
                          @{/reviews/add}"
              method="post" class="review-form">

            <input type="hidden" name="id" th:if="${review.id != null}" th:value="${review.id}">

            <div class="form-group">
                <label for="userName">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                <input type="text" id="userName" name="userName"
                       th:value="${review.userName}"
                       required class="form-input"
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
            </div>

            <div class="form-group">
                <label for="product">–ü—Ä–æ–¥—É–∫—Ç/–£—Å–ª—É–≥–∞:</label>
                <input type="text" id="product" name="product"
                       th:value="${review.product}"
                       required class="form-input"
                       placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–ª–∏ —É—Å–ª—É–≥–∏">
            </div>

            <div class="form-group">
                <label for="rating">–†–µ–π—Ç–∏–Ω–≥ (1-5):</label>
                <select id="rating" name="rating" required class="form-input">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥</option>
                    <option value="1" th:selected="${review.rating == 1}">1 ‚òÖ - –£–∂–∞—Å–Ω–æ</option>
                    <option value="2" th:selected="${review.rating == 2}">2 ‚òÖ‚òÖ - –ü–ª–æ—Ö–æ</option>
                    <option value="3" th:selected="${review.rating == 3}">3 ‚òÖ‚òÖ‚òÖ - –ù–æ—Ä–º–∞–ª—å–Ω–æ</option>
                    <option value="4" th:selected="${review.rating == 4}">4 ‚òÖ‚òÖ‚òÖ‚òÖ - –•–æ—Ä–æ—à–æ</option>
                    <option value="5" th:selected="${review.rating == 5}">5 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ - –û—Ç–ª–∏—á–Ω–æ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea id="comment" name="comment"
                          class="form-input textarea"
                          placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤..."
                          th:text="${review.comment}"></textarea>
            </div>

            <div class="form-buttons">
                <button type="submit" class="btn btn-primary">
                        <span th:text="${review.id != null} ? '–û–±–Ω–æ–≤–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'">
                            –î–æ–±–∞–≤–∏—Ç—å
                        </span>
                </button>
                <a th:href="@{/reviews}" class="btn btn-secondary"
                   th:if="${review.id != null}">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>

    <div class="table-section">
        <h2>–°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤</h2>
        <div th:if="${#lists.isEmpty(reviews)}" class="no-data">
            –ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!
        </div>
        <div class="table-container" th:unless="${#lists.isEmpty(reviews)}">
            <div class="reviews-grid">
                <div th:each="review : ${reviews}" class="review-card">
                    <div class="review-header">
                        <h3 th:text="${review.product}"></h3>
                        <div class="rating-stars" th:text="${review.ratingStars}"></div>
                    </div>
                    <div class="review-body">
                        <p class="review-comment" th:text="${review.comment} ?: '–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'"></p>
                    </div>
                    <div class="review-footer">
                        <span class="review-author" th:text="'üë§ ' + ${review.userName}"></span>
                        <div class="review-actions">
                            <a th:href="@{/reviews/edit/{id}(id=${review.id})}"
                               class="btn btn-edit">‚úèÔ∏è</a>
                            <a th:href="@{/reviews/delete/{id}(id=${review.id})}"
                               class="btn btn-delete"
                               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')">üóëÔ∏è</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞–º–∏ - –í–∞—Ä–∏–∞–Ω—Ç 17</p>
    </footer>
</div>
</body>
</html>